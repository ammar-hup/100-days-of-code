//start of code
#include <iostream>
#include <fstream>
#include <map>
#include <stdlib.h>
#define Min_BALANCE 500
using namespace std;
class Account
{
    //class properties
  private:
    long acc_no;
    string acc_name;
    float acc_balance;
    static long next_acc_no;
    //class behaviors
  public:
    //constructors
    Account();
    Account(string acc_name,float acc_balance);
    //Actions
    long get_acc_no();
    string get_acc_name();
    float get_acc_balance();
    float Debosit(float amount);
    float Withdraw(float amount);
    static void setLastAccountNumber(long accountnumber);
    static long getLastAccountNumber();
    friend ofstream & operator<<(ofstream &ofs,Account &acc);
    friend ifstream & operator>>(ifstream &ifs,Account &acc);
    friend ostream & operator<<(ostream &os,Account &acc);
};
class Bank
{
    //class properties
  private:
    map<long,Account> acc_list;  //a map structure to store the bank accounts on list

    //class behaviors
  public:

    //constructors
    Bank ();
    //Actions
    Account open_acc(string fname ,string lname ,float balance);
    account show_acc (long acc_no);
    Account diposite(long acc_no ,float amount);
    Account withdraw(long acc_no ,float amount);
    float balance_Enquiry(long acc_no);
    void close_acc(long acc_no);
    void show_all_accs();
    bool is_acc_exist (long acc_no, string acc_name);
    //destructor
    ~Bank();
};
long Account::next_acc_no = 0;
int main()
{
    Bank b();
    Account acc;
    int choice,accnum;
    string name;
    float balance,amount;
try
{
    if (choice<1||choice>9)
        throw exception();
    do
{
    //make a menu
cout<<"Banking System\n\n";
cout<<"         Select one Option below\n";
cout<<"         1.Create new Account\n";
cout<<"         2.Sign in Account\n";
cout<<"         3.Diposite Amount\n";
cout<<"         4.Withdraw Amount\n";
cout<<"         5.Balance Enquiry\n";
cout<<"         6.Account Info\n";
cout<<"         7.Show All Accounts\n";
cout<<"         8.close Account\n";
cout<<"         9.Exit\n";
cout<<"Enter your choice";
cin>>choice;
    switch(choice)
    {
case 1:
    cout<<"Enter your first name\n";
        cin>>fname;
    cout<<"Enter your last name\n";
        cin>>lname;
    cout<<"Enter your Balance \n";
        cin>>balance;
    acc=b.OpenAccount(fname,lname,balance);
    cout<<"The Account created \n";
    cout<<acc;
    break;
case 2:

    break;
case 3:
    cout<<"Enter your Account number\n";
    cin>>accnum;
    cout<<"Enter your Balance \n";
    cin>>balance;
    acc=b.Diposite(accnum,balance);
    cout<<acc;
    break;
case 4:

    break;
case 5:
     cout<<"Enter your first name\n";
        cin>>fname;
    cout<<"Enter your last name\n";
        cin>>lname;
    cout<<"Enter your Balance \n";
        cin>>balance;
    acc=b.OpenAccount(fname,lname,balance);
    cout<<"The Account created \n";
    cout<<acc;
    break;

case 6:

    break;
case 7:

    break;
case 8:

    break;
case 9:

    break;
    }
long Account::NextAccountNumber=0;


}
while(choice!=7);
}
catch(exception e)
{
    cout<<"Error! choose number between 1:9"
}
return  0;
}

//implementation of  Class account methods
Account::Account ()
{
}
Account::Account( string n,float bal)
{
    NextAccountNumber++;
    accountnumber=NextAccountNumber;
    name=n;
    balance=bal;
}

long Account:: get_acc_no ()
{
    return accountnumber;
}
string Account::get_acc_name ()
{
    return acc_name;
}
float Account::get_acc_balance ()
	{
		return acc_balance;
	}
float Account::Debosit (float amount)
{
    return  acc_balance+=amount;
}
float Account::Withdraw (float amount)
{
    if(acc_balance - amount < Min_BALANCE
       )
    return acc_balance-=amount;
}
ofstream& operator<< (ofstream &ofs,account &acc)
	{
		ofs << "Account Number : " << acc.get_acc_no () << endl;
		ofs << "Account Name : " << acc.get_acc_name () << endl;
		ofs << "Account Balance : " << acc.get_acc_balance () <<endl;
		return ofs;
	}
ifstream& operator>> (ifstream &ifs,account &acc)
	{
		ifs >> acc.acc_no;
		getline (ifs, acc.acc_name) ;
		ifs >> acc.acc_balance;
		return ifs;
	}
ostream& operator<< (ostream &os,account &acc)
	{
		os << "Account Number : " << acc.get_acc_no () << endl;
		os << "Account Name : " << acc.get_acc_name () <<endl;
		os << "Account Balance : " << acc.get_acc_balance () << endl;
		return os;
	}
//implementation of  Class Bank methods
Bank::Bank ()
{
    Account acc;
}
Account Bank::open_acc (string acc_name, long acc_balance)
{
    Account acc(acc_name, acc_balance);
}
Account Bank::show_acc (long acc_no)
{
    map<long, Account>::iterator itr = acc_list.find(acc_no);
    return itr -> second;	
}
Account Bank::deposit (long acc_no, float amount)
{
    map<long, Account>::iterator itr = acc_list.find(acc_no);
    itr -> second.deposit(amount);
    return itr -> second;
}
Account Bank::withdraw (long acc_no, float amount)
{
    map<long, Account>::iterator itr = acc_list.find(acc_no);
    itr -> second.withdraw(amount);
    return itr -> second;
}
Account Bank::close_acc (long acc_no)
{
    map<long, Account>::iterator itr = acc_list.find(acc_no);
    acc_list.erase(acc_no)
}
float Bank::total ()//to show the sum of all account balance
{
    float sum=0.0;
    for(x=acc_list.begin();x!=acc_list.end();x++)
    {
        sum += itr -> second.get_acc_balance ();        
    }
    return sum;
}
//End of my program


